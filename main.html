<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>티켓 예매 사이트</title>
    <link rel="stylesheet" href="CSS/main.css" />
  </head>
  <body>
    <header>
      <h1>티켓 예매 사이트</h1>
      <div class="auth-links">
        <a href="login.html">로그인</a>
        <a href="join_member.html">회원가입</a>
      </div>
      <div class="user-info">
        <a href="my_page.html">사용자 이름</a>
        <button id="logoutButton">로그아웃</button>
        <button id="cartButton">장바구니</button>
      </div>
    </header>
    <nav>
      <a href="main.html">홈</a>
      <a href="concert.html">콘서트</a>
      <a href="sports.html">스포츠</a>
      <a href="musical.html">연극/뮤지컬</a>
    </nav>
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="이벤트 검색..." />
      <input type="submit" value="검색" onclick="searchEvents()" />
    </div>
    <div class="events-container" id="eventsContainer">
      <!-- 이벤트 목록은 아래 스크립트에 의해 동적으로 생성됩니다 -->
    </div>
    <script>
      const events = [
        {
          title: "제목 1",
          location: "서울",
          date: "2024-05-10",
          poster: "IMG/포스터1.jpeg",
        },
        {
          title: "제목 2",
          location: "부산",
          date: "2024-06-15",
          poster: "IMG/포스터2.jpeg",
        },
        {
          title: "제목 3",
          location: "서울",
          date: "2024-07-15",
          poster: "IMG/포스터3.jpeg",
        },
        {
          title: "제목 4",
          location: "???",
          date: "2024-06-15",
          poster: "IMG/포스터4.jpeg",
        },
        {
          title: "제목 5",
          location: "서울",
          date: "2024-09-15",
          poster: "IMG/포스터5.jpeg",
        },
      ];

      function displayEvents(eventsToDisplay) {
        const container = document.getElementById("eventsContainer");
        container.innerHTML = ""; // Clear previous results
        eventsToDisplay.forEach((event) => {
          const eventElement = `
          <div class="event">
            <img src="${event.poster}" alt="${event.title}" />
            <h3>${event.title}</h3>
            <p>장소: ${event.location}</p>
            <p>날짜: ${event.date}</p>
            <button>티켓 예매</button>
          </div>`;
          container.innerHTML += eventElement;
        });
      }

      function searchEvents() {
        const searchText = document
          .getElementById("searchInput")
          .value.toLowerCase();
        const filteredEvents = events.filter(
          (event) =>
            event.title.toLowerCase().includes(searchText) ||
            event.location.toLowerCase().includes(searchText) ||
            event.date.includes(searchText)
        );
        displayEvents(filteredEvents);
      }

      window.onload = function () {
        displayEvents(events); // Display all events initially
      };
    </script>
    <script>
      window.onload = function () {
        displayEvents(events); // 초기 이벤트 표시

        const isLoggedIn = localStorage.getItem("username"); // 로그인 상태 확인
        if (isLoggedIn) {
          document.querySelector(".auth-links").style.display = "none"; // 로그인, 회원가입 링크 숨기기
          document.querySelector(".user-info").style.display = "flex"; // 사용자 정보 및 장바구니 버튼 표시
          document.querySelector(".user-info a").textContent = isLoggedIn; // 사용자 이름 설정
        } else {
          document.querySelector(".user-info").style.display = "none"; // 사용자 정보 및 장바구니 버튼 숨기기
          document.querySelector(".auth-links").style.display = "flex"; // 로그인, 회원가입 링크 표시
        }
      };
    </script>
    <footer>
      <p>© 2024 티켓 예매 사이트. 모든 권리 보유.</p>
    </footer>
  </body>
</html>
